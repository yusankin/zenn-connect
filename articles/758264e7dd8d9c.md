---
title: "Flaskã‹ã‚‰HTMLã«åŸ‹ã‚è¾¼ã‚“ã UnityWebGLã‚’æ“ä½œã™ã‚‹æ–¹æ³•"
emoji: "ğŸ‘"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["flask","unity","python"]
published: true
---
# å‰ç½®ã
RaspberryPiã«æ¥ç¶šã—ãŸãƒ‡ãƒã‚¤ã‚¹ã‚’ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ã®å‡ºæ¥ãªã„äººã«ãƒ—ãƒ¬ã‚¼ãƒ³ãƒˆã™ã‚‹ã“ã¨ã«ãªã‚Šã€Flaskã‚’ä½¿ã£ã¦ãƒ–ãƒ©ã‚¦ã‚¶ã‹ã‚‰ãƒ‡ãƒã‚¤ã‚¹æ“ä½œã§ãã‚‹ã‚ˆã†ã«ã—ã¦ã‚ã’ã¾ã—ãŸã€‚
ãã®éš›ã«ãƒ‡ãƒã‚¤ã‚¹çŠ¶æ…‹ãŒè¦–è¦šçš„ã«ã‚ã‹ã‚‹ã‚ˆã†ã«Unityã§3Dãƒ¢ãƒ‡ãƒ«ã‚’ä½œæˆã¨WebGLãƒ“ãƒ«ãƒ‰ã‚’è¡Œã„ã€RaspberryPiã‹ã‚‰ã®ã‚»ãƒ³ã‚µãƒ¼ãƒ‡ãƒ¼ã‚¿ã§Unityã®ãƒ¢ãƒ‡ãƒ«çŠ¶æ…‹ãŒå¤‰æ›´ã™ã‚‹ã‚ˆã†ã«ã—ã¾ã—ãŸã€‚
ä»Šå›ã¯ä¸Šè¨˜ã‚’å®Ÿç¾ã™ã‚‹ãŸã‚ã«ä½¿ç”¨ã—ãŸæŠ€è¡“ã‚’å¿˜ã‚Œãªã„ãŸã‚ã«å‚™å¿˜éŒ²çš„ã«ã¾ã¨ã‚ã¾ã—ãŸã€‚
# ä½œã£ãŸã‚‚ã®
å‰ç½®ãã§æ›¸ã„ãŸãƒ—ãƒ¬ã‚¼ãƒ³ãƒˆã®å“ã¯å€‹äººæƒ…å ±ã‚’å«ã‚€ã®ã§åˆ¥é€”ã‚µãƒ³ãƒ—ãƒ«ã‚’ä½œæˆã—ã¾ã—ãŸã€‚
ä»Šå›ã¯ãƒœã‚¿ãƒ³ã‚’æŠ¼ã™ã¨ãƒœãƒ¼ãƒ«ã®è»¢ãŒã‚‹é€Ÿåº¦ãŒå¤‰åŒ–ã™ã‚‹ã‚µãƒ³ãƒ—ãƒ«ã‚’ä½œæˆã™ã‚‹æ‰‹é †ã‚’æ›¸ãè¨˜ã—ã¦ã„ã¾ã™ã€‚  
github:https://github.com/yusankin/WebGLFlaskSample  
![ã‚µãƒ³ãƒ—ãƒ«](https://storage.googleapis.com/zenn-user-upload/398b99937d82-20230501.gif)

# Unity
## ç’°å¢ƒ
- unity 2021.3.19f1
## ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
1. ãƒ¢ãƒ‡ãƒ«ä½œæˆ  
    ã¾ãšåˆã‚ã«å›³ã®ã‚ˆã†ã«ã‚¹ãƒ•ã‚£ã‚¢ã¨å¹³é¢ã‚’é…ç½®ã—ã¾ã™ã€‚  
    è‰²ã¯è¦‹ãˆã‚„ã™ã„ã‚ˆã†ã«å¹³é¢ã‚’æ°´è‰²ã«å¤‰æ›´ã—ã¦ã„ã¾ã™ã€‚  
    ![ãƒ¢ãƒ‡ãƒ«1](https://storage.googleapis.com/zenn-user-upload/38a105464107-20230501.png)

2. ã‚¹ãƒ•ã‚£ã‚¢ã®è½ä¸‹åˆ¤å®šç”¨ã®ãƒœãƒ¼ãƒ‰ã‚’ä½œæˆ  
    å¹³é¢ã‚’ååˆ†ã«è¦†ã†å¤§ãã•ã§ã‚­ãƒ¥ãƒ¼ãƒ–ã‚’ä½œæˆã—ã¾ã™ã€‚  
    ![ãƒ¢ãƒ‡ãƒ«2](https://storage.googleapis.com/zenn-user-upload/f1fc402d7edf-20230501.png)

    ãã®éš›ã«ã€ã‚­ãƒ¥ãƒ¼ãƒ–ã®ã‚¤ãƒ³ã‚¹ãƒšã‚¯ã‚¿ã«BoxColliderã‚’è¿½åŠ ã—ã¦ãƒˆãƒªã‚¬ãƒ¼ã«ã™ã‚‹ã«ãƒã‚§ãƒƒã‚¯ã‚’ã¤ã‘ã¾ã™ã€‚ï¼ˆè½ä¸‹åˆ¤å®šã®ãƒˆãƒªã‚¬ãƒ¼ã«ã™ã‚‹ãŸã‚ï¼‰  
    ã¾ãŸã€Mesh Rendererã®ãƒã‚§ãƒƒã‚¯ã‚’å¤–ã—ã¾ã™ã€‚  
    ![ã‚¤ãƒ³ã‚¹ãƒšã‚¯ã‚¿1](https://storage.googleapis.com/zenn-user-upload/2a765e67b950-20230501.png)

3. ã‚¤ãƒ³ãƒ—ãƒƒãƒˆãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®è¿½åŠ   
    ãƒ’ã‚¨ãƒ©ãƒ«ã‚­ãƒ¼ã«ã¦ç©ºã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’è¿½åŠ ã—ã€ã‚¤ãƒ³ã‚¹ãƒšã‚¯ã‚¿ã«ã¦ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®è¿½åŠ ã‹ã‚‰Standalone Input Moduleã‚’è¿½åŠ ã—ã¾ã™ã€‚  
    Event Systemã¯Standalone Input Moduleã‚’è¿½åŠ ã™ã‚‹ã¨å‹æ‰‹ã«è¿½åŠ ã•ã‚Œã¾ã™ã€‚  
    ![ã‚¤ãƒ³ã‚¹ãƒšã‚¯ã‚¿2](https://storage.googleapis.com/zenn-user-upload/8cf3ad5e6bf5-20230501.png)

4. ãƒ†ã‚­ã‚¹ãƒˆã®è¿½åŠ   
    UIã®ãƒ†ã‚­ã‚¹ãƒˆ-TextMeshProã‚’é¸æŠã—ã¦ãƒ†ã‚­ã‚¹ãƒˆã‚’è¿½åŠ ã—ã¾ã™ã€‚  
    é…ç½®ã¨åç§°ã¯è‡ªç”±ã§ã™ãŒã€ä»Šå›ã¯2ç¨®ã®ãƒ†ã‚­ã‚¹ãƒˆã‚’ã‚­ãƒ£ãƒ³ãƒã‚¹ã®å·¦ä¸Šã«è¿½åŠ ã—ã¦ã„ã¾ã™ã€‚  
    ![ã‚­ãƒ£ãƒ³ãƒã‚¹1](https://storage.googleapis.com/zenn-user-upload/87b24dce58ca-20230501.png)

5. è½ä¸‹æ™‚ã®ãƒªãƒˆãƒ©ã‚¤è¨­å®š  
    ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’æ–°è¦ä½œæˆã—ã¦åå‰ã‚’RetryColliderã«ã—ã€ä¸‹è¨˜ã®ã‚³ãƒ¼ãƒ‰ã‚’å¼µã‚Šä»˜ã‘ã¾ã™ã€‚
    ```csharp:RetryCollider.cs
    using System.Collections;
    using System.Collections.Generic;
    using UnityEngine;

    public class RetryCollider : MonoBehaviour
    {

        private Vector3 _initialPos;
        private Rigidbody rb;

        // Start is called before the first frame update
        void Start()
        {
            rb = GetComponent<Rigidbody>();
            _initialPos = this.transform.position;
        }

        void OnTriggerEnter(Collider collider)
        {
            if (collider.name == "RetryBoard")
            {
                rb.velocity = Vector3.zero;
                rb.angularVelocity = Vector3.zero;
                this.transform.position = _initialPos;
                Debug.Log("Collider");
            }
        }
    }
    ```
    ã‚¹ãƒ•ã‚£ã‚¢ã«å…ˆã»ã©ä½œæˆã—ãŸRetryColliderã‚’è¿½åŠ ã—ã¾ã™ã€‚  
    ![ã‚¤ãƒ³ã‚¹ãƒšã‚¯ã‚¿3](https://storage.googleapis.com/zenn-user-upload/4650815f8e83-20230501.png)

6. ã‚¹ãƒ•ã‚£ã‚¢ã®ç§»å‹•è¨­å®š  
    ç©ºã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œæˆã—ã¦GameControllerã¨åå‰ã«ã—ã¾ã™ã€‚  
    ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’æ–°è¦ä½œæˆã—ã¦åå‰ã‚’SphereMoveã«ã—ã€ä¸‹è¨˜ã®ã‚³ãƒ¼ãƒ‰ã‚’å¼µã‚Šä»˜ã‘ã¾ã™ã€‚  
    ```csharp:SphereMove.cs
    using System.Collections;
    using System.Collections.Generic;
    using UnityEngine;
    using System.Globalization;
    using TMPro;

    public class SphereMove : MonoBehaviour
    {
        public GameObject _Player;
        private Rigidbody rb;

        internal float dx = 0;
        internal float dz = 0;
        private float _Speed;

        public TextMeshProUGUI Flasktext;

        void Start()
        {
            rb = _Player.GetComponent<Rigidbody>();
            _Speed = 0.5f;
        }


        void Update()
        {
            UnitySpehreMove();
        }

        private void UnitySpehreMove()
        {
            if (Input.GetKey(KeyCode.LeftArrow))
            {
                dx = -0.1f;
            }
            else if (Input.GetKey(KeyCode.RightArrow))
            {
                dx = 0.1f;
            }
            else
            {
                dx = 0.0f;
            }

            if (Input.GetKey(KeyCode.UpArrow))
            {
                dz = 0.1f;
            }
            else if (Input.GetKey(KeyCode.DownArrow))
            {
                dz = -0.1f;
            }
            else
            {
                dz = 0.0f;
            }
            var movement = new Vector3(dx, 0, dz);
            rb.AddForce(movement * _Speed);
        }

        public void FlaskSpeed(string flaskSpeed)
        {
            Flasktext.text = "Flask Speed is " + flaskSpeed;
            _Speed = float.Parse(flaskSpeed, CultureInfo.InvariantCulture);
        }

        public void ResetSpeed()
        {
            _Speed = 0.5f;
            Flasktext.text = "Flask Speed is XX";
        }

    }
    ```  
    GameControllerã«Sphere Moveã‚’è¿½åŠ ã—ã¾ã™ã€‚  
    Flasktextã«Flaskã‹ã‚‰å¤‰æ›´ã—ãŸã„ãƒ†ã‚­ã‚¹ãƒˆã‚’è¿½åŠ ã—ã¾ã™ã€‚  
    ![ã‚¤ãƒ³ã‚¹ãƒšã‚¯ã‚¿4](https://storage.googleapis.com/zenn-user-upload/22f0842632cf-20230501.png)

7. å‹•ä½œç¢ºèª  
    ä½œæˆã—ãŸãƒ•ã‚¡ã‚¤ãƒ«ãŒå®Ÿè¡Œå¯èƒ½ã‹ç¢ºèªã‚’ã—ã¾ã™ã€‚  
    ä¸‹è¨˜ã®ã‚ˆã†ã«å‹•ä½œã™ã‚Œã°OKã§ã™ã€‚  
    ![ã‚µãƒ³ãƒ—ãƒ«2](https://storage.googleapis.com/zenn-user-upload/19e5477b65a5-20230501.gif)

8. WebGLãƒ“ãƒ«ãƒ‰  
    ãƒ•ã‚¡ã‚¤ãƒ«->ãƒ“ãƒ«ãƒ‰è¨­å®šã‹ã‚‰WebGLãƒ“ãƒ«ãƒ‰ã‚’é¸æŠã€ã‚·ãƒ¼ãƒ³ã‚’è¿½åŠ ã—ã¦ãƒ“ãƒ«ãƒ‰ã®å®Ÿè¡Œã‚’ã—ã¦ãã ã•ã„ã€‚  
    ã“ã‚Œã§Unityå´ã®è¨­å®šã¯å®Œäº†ã§ã™ã€‚  
    æ¬¡ã‹ã‚‰Flaskã®è¨­å®šã‚’ã—ã¦ã„ãã¾ã™ã€‚  

# Flask
## ç’°å¢ƒ
- Python 3.9.13  
- Flask  2.2.3
## ãƒ•ã‚¡ã‚¤ãƒ«æ§‹æˆ  
```:ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹æˆ
.
â”œâ”€â”€ templates
â”‚   â”œâ”€â”€ Build        # WebGLã§Buildã—ã¦ã§ããŸBuildãƒ•ã‚¡ã‚¤ãƒ«
â”‚   â”œâ”€â”€ TemplateData # WebGLã§Buildã—ã¦ã§ããŸTemplateDataãƒ•ã‚¡ã‚¤ãƒ«
â”‚   â””â”€â”€ index.html   # WebGLã§Buildã—ã¦ã§ããŸHTMLãƒ•ã‚¡ã‚¤ãƒ«
â””â”€â”€ app.py           # ä»Šã‹ã‚‰ã¯ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«ã®è©±
```
## ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
1. Flaskã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«  
    Flaskã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã™ã€‚  
    ç­†è€…ã¯pipã§å…¥ã‚Œã¦ã¾ã™ã€‚
    ```python:pip
    pip install Flask
    ```

2. app.pyã®ä½œæˆ  
    app.pyã‚’ä½œæˆã—ã¦ä¸‹è¨˜ãƒ•ã‚¡ã‚¤ãƒ«ã‚’è²¼ã‚Šä»˜ã‘ã¾ã™ã€‚  
    ã‚¢ãƒ—ãƒªã‚’èµ·å‹•ã™ã‚Œã°ãƒ­ãƒ¼ã‚«ãƒ«ãƒ›ã‚¹ãƒˆã§Webãƒšãƒ¼ã‚¸ã‚’é–‹ãã“ã¨ãŒã§ãã¾ã™ã€‚  
    ã‚³ãƒ¼ãƒ‰ã®å†…å®¹ã¨ã—ã¦ã¯ã‚¹ãƒ•ã‚£ã‚¢ã®ã‚¹ãƒ”ãƒ¼ãƒ‰ã‚’0.5->10ã«ã™ã‚‹ã‚‚ã®ã§ã™ã€‚
    ```python:app.py
    from flask import Flask, render_template, jsonify

    app = Flask(__name__,static_folder="templates")

    @app.route("/", methods=["GET", "POST"])
    def main_page():
        return render_template("index.html")

    @app.route("/SphereMove", methods=["POST"])
    def TempDateToUnity():
        flaskspeed = 10
        res = {"count": flaskspeed}
        return jsonify(res)

    if __name__ == "__main__":
        app.run(debug=True , port=8888)
    ```  
    å®Ÿè¡Œã—ã¦ã‚‚Webãƒšãƒ¼ã‚¸ã«é£›ã‚“ã§ã‚‚WebGLã‚³ãƒ³ãƒ†ãƒ³ãƒ„ãŒã†ã¾ãå‹•ã‹ãªã„ã¨æ€ã„ã¾ã™ã€‚  
    æ¬¡ã«HTMLãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç·¨é›†ã—ã¦ãƒªãƒ³ã‚¯ã®ä¿®æ­£ã¨Flask-WebGLé–“ã‚’é€£æºã§ãã‚‹ã‚ˆã†ã«ã—ã¾ã™ã€‚

# HTML
## ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
ä¸‹è¨˜3ã¤ã®ã“ã¨ã‚’å¤‰æ›´ã—ã¦ã„ãã¾ã™ã€‚
- jqueryã®è¿½åŠ 
- linkã®ä¿®æ­£
- é–¢æ•°ã®è¿½åŠ 
ãã‚Œã§ã¯é †ã«HTMLã®ãƒ‡ãƒ¼ã‚¿ã‚’å¤‰æ›´ã—ã¦ã„ãã¾ã™ã€‚

1. jqueryã®è¿½åŠ ã¨linkã®ä¿®æ­£  
    ajax(éåŒæœŸé€šä¿¡)ã‚’è¡Œã†ãŸã‚ã«jqueryã‚’è¿½åŠ ã—ã¾ã™ã€‚  
    ã¾ãŸã€WebGLèµ·å‹•ã®ãŸã‚ã«å¿…è¦ãªã‚¢ã‚¤ã‚³ãƒ³ã¨CSSã®ãƒªãƒ³ã‚¯ã‚’æ›¸ãæ›ãˆã¾ã™ã€‚  
    ```html:<head>éƒ¨ã®è¿½åŠ ã¨ä¿®æ­£
    <!DOCTYPE html>
    <html lang="en-us">
    <head>
        <meta charset="utf-8">
        <!-- è¿½åŠ  -->
        <link href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.13.2/themes/smoothness/jquery-ui.css" rel="stylesheet">
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.4/jquery.min.js"></script>
        <!-- è¿½åŠ  -->

        <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
        <title>Unity WebGL Player | UnityWebGL</title>
        <!-- æ›¸ãæ›ãˆ -->
        <link rel="shortcut icon" href="../templates/TemplateData/favicon.ico">
        <link rel="stylesheet" href="../templates/TemplateData/style.css">
        <!-- æ›¸ãæ›ãˆ -->
    </head>
    ```

2. åˆæœŸåŒ–ã¨linkã®ä¿®æ­£  
    Flaskã‹ã‚‰JavaScriptã¸é€ã‚‹ãƒ‡ãƒ¼ã‚¿ã‚’æ ¼ç´ã™ã‚‹ãŸã‚ã«countã‚’å®šç¾©ã—ã¾ã™ã€‚  
    WebGLèµ·å‹•ã®ãŸã‚ã«buildUrlã®ãƒªãƒ³ã‚¯ã‚’ä¿®æ­£ã—ã¾ã™ã€‚  
    ```javascript:<script>éƒ¨ã®è¿½åŠ ã¨ä¿®æ­£
    <script>
        var container = document.querySelector("#unity-container");
        var canvas = document.querySelector("#unity-canvas");
        var loadingBar = document.querySelector("#unity-loading-bar");
        var progressBarFull = document.querySelector("#unity-progress-bar-full");
        var fullscreenButton = document.querySelector("#unity-fullscreen-button");
        var warningBanner = document.querySelector("#unity-warning");
        var count = 0; // åˆæœŸåŒ–ã‚’è¿½åŠ 


        // Shows a temporary message banner/ribbon for a few seconds, or
        // a permanent error message on top of the canvas if type=='error'.
        // If type=='warning', a yellow highlight color is used.
        // Modify or remove this function to customize the visually presented
        // way that non-critical warnings and error messages are presented to the
        // user.
        function unityShowBanner(msg, type) {
            function updateBannerVisibility() {
            warningBanner.style.display = warningBanner.children.length ? 'block' : 'none';
            }
            var div = document.createElement('div');
            div.innerHTML = msg;
            warningBanner.appendChild(div);
            if (type == 'error') div.style = 'background: red; padding: 10px;';
            else {
            if (type == 'warning') div.style = 'background: yellow; padding: 10px;';
            setTimeout(function() {
                warningBanner.removeChild(div);
                updateBannerVisibility();
            }, 5000);
            }
            updateBannerVisibility();
        }

        var buildUrl = "../templates/Build"; // ãƒªãƒ³ã‚¯ã®æ›¸ãæ›ãˆ
        var loaderUrl = buildUrl + "/Build.loader.js";
        var config = {
            dataUrl: buildUrl + "/Build.data.unityweb",
            frameworkUrl: buildUrl + "/Build.framework.js.unityweb",
            codeUrl: buildUrl + "/Build.wasm.unityweb",
            streamingAssetsUrl: "StreamingAssets",
            companyName: "DefaultCompany",
            productName: "UnityWebGL",
            productVersion: "0.1",
            showBanner: unityShowBanner,
        };
    ```

3. é–¢æ•°ã®è¿½åŠ   
    WebGLã®é–¢æ•°ã‚’å‘¼ã³å‡ºã™ãŸã‚ã®é–¢æ•°ã‚’å®šç¾©ã—ã¾ã™ã€‚  
    ```javascript:<script>éƒ¨ã®é–¢æ•°ã®è¿½åŠ   
    var script = document.createElement("script");
        script.src = loaderUrl;
        script.onload = () => {
            createUnityInstance(canvas, config, (progress) => {
            progressBarFull.style.width = 100 * progress + "%";
            }).then((unityInstance) => {
            loadingBar.style.display = "none";

            //ã“ã“ã‹ã‚‰ä¸‹ã«é–¢æ•°ã‚’è¿½è¨˜ 
            $(function () {
                $('#FlaskSpeedButton').click(
                function flask() {        
                    $.ajax({
                    type: "POST",
                    url: '/SphereMove',
                    data: {count: count},
                    dataType: 'json'
                    }).done(function(response) {
                        count = response.count;
                        // unityInstance.SendMessage("Unityã®C#ã‚¹ã‚¯ãƒªãƒ—ãƒˆãŒã‚¢ã‚¿ãƒƒãƒã•ã‚Œã¦ã„ã‚‹ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆå","ã‚¢ã‚¿ãƒƒãƒã•ã‚Œã¦ã„ã‚‹ã‚¹ã‚¯ãƒªãƒ—ãƒˆã§å‘¼ã³å‡ºã—ãŸã„é–¢æ•°å","(ã‚ã‚Œã°)å¼•æ•°";
                        unityInstance.SendMessage("GameController","FlaskSpeed",String(count));
                    }).fail(function() {
                        console.log("app is stopped")
                    });
                }
                );
                $('#ResetSpeedButton').click(
                function reset() {        
                    $.ajax({
                    }).done(function(response) {
                        unityInstance.SendMessage("GameController","ResetSpeed");
                    }).fail(function() {
                        console.log("app is stopped")
                    });
                }
                );

            });

            //ã“ã“ã‚ˆã‚Šä¸Šã«é–¢æ•°ã‚’è¿½è¨˜ 
            fullscreenButton.onclick = () => {
                unityInstance.SetFullscreen(1);
            };
            }).catch((message) => {
            alert(message);
            });
        };
        document.body.appendChild(script);
        </script>
    ```
    function flask()ã¯Flaskã‹ã‚‰ã®å€¤ã‚’WebGLã«æ¸¡ã™å ´åˆã€function reset()ã¯Javascriptã‹ã‚‰WebGLé–¢æ•°ã‚’å‘¼ã³å‡ºã—ãŸã„æ™‚ã®æ›¸ãæ–¹ã§ã™ã€‚  
    è‡ªèº«ã®ç’°å¢ƒã§å¿…è¦ã«å¿œã˜ã¦æ›¸ãæ›ãˆã¦ãã ã•ã„ã€‚
    ```javascript
    $.ajax({
            type: "POST",  <-â‘ 
            url: '/SphereMove', <-â‘¡
            data: {count: count}, <-â‘¢
            dataType: 'json'
    -------------------------------------------
    @app.route("/SphereMove" <-â‘¡, methods=["POST"] <-â‘ )
    def TempDateToUnity():
        flaskspeed = 10
        res = {"count": flaskspeed} <-â‘¢
        return jsonify(res)
    ```
    Flaskã¨HTMLã‚’æŠœç²‹ã—ã¾ã™ã€‚
    â‘ ã€â‘¡ã€â‘¢ã‚’åŒã˜ã‚¿ã‚¤ãƒ—ã«ã™ã‚‹ã“ã¨ãŒé‡è¦ã§ã™ã€‚

4. ãƒœã‚¿ãƒ³ã®è¿½åŠ   
    functionã‚’å‘¼ã³å‡ºã™ãŸã‚ã®ãƒœã‚¿ãƒ³ã®è¿½åŠ ã‚’ã—ã¾ã™ã€‚
    ```html:<body>éƒ¨ã®è¿½åŠ 
            </script>
            <!-- ãƒœã‚¿ãƒ³è¿½åŠ  -->
            <input type="button" id="FlaskSpeedButton" value="ChangeSpeed" />
            <input type="button" id="ResetSpeedButton"  value="ResetSpeed" />
            <!-- ãƒœã‚¿ãƒ³è¿½åŠ  -->
        </body>
    </html>
    ```

ä»¥ä¸Šã§ã™ã¹ã¦ã®æº–å‚™ãŒçµ‚ã‚ã‚Šã§ã™ã€‚  
pythonã‹ã‚‰ã‚³ãƒ¼ãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹ã¨WebGLã‚³ãƒ³ãƒ†ãƒ³ãƒ„ãŒèµ·å‹•ã—ã€ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã¨ã‚¹ãƒ•ã‚£ã‚¢ã®ç§»å‹•é€Ÿåº¦ãŒå¤‰åŒ–ã™ã‚‹ã¨æ€ã„ã¾ã™ã€‚  

# ãŠã‚ã‚Šã«
Flaskã‹ã‚‰UnityWebGLã®é–¢æ•°ã‚’å‘¼ã³å‡ºã™æ–¹æ³•ã‚’ç´¹ä»‹ã—ã¾ã—ãŸã€‚  
WebGLã‚’å¤–éƒ¨ã‹ã‚‰æ“ä½œã—ãŸã„å ´åˆã‚„RaspberryPiã®å–å¾—ãƒ‡ãƒ¼ã‚¿ã‚’ç”»é¢ã«è¡¨ç¤ºã—ãŸã„éš›ã«ä½¿ãˆã‚‹ã‹ã¨æ€ã„ã¾ã™ã€‚  
ã“ã®è¨˜äº‹ãŒèª°ã‹ã®ä½•ã‹ã®å½¹ã«ç«‹ã¦ã°å¹¸ã„ã§ã™ã€‚